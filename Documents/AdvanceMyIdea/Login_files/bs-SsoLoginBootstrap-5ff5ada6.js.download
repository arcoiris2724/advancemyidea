define("@widget/MEMBERSHIP/bs-SsoLoginBootstrap-5ff5ada6.js",["exports","~/c/bs-dataAids","~/c/bs-getQueryStringValue","~/c/bs-validation","~/c/bs-index2","~/c/bs-regex","~/c/bs-client"],(function(e,t,a,s,r,c,l){"use strict";const o=r.l.isRequired({message:"passwordCannotBeBlank"}),n=r.l.isRequired({message:"emailValidationErrorMessage"}),i=r.l.matchesPattern(c.E)({message:"emailValidationErrorMessage"}),g=r.l.composeValidators(n,i)("email"),d=r.l.combineValidators({password:o,email:g}),E=r.l.combineValidators({email:g}),u=new r.S;class m extends(global.React||guac.react).Component{constructor(e){super(e),this.state={email:"",busy:!1,redirect:unescape(a.g("r"))},this.onChange=this.onChange.bind(this),this.onSubmit=this.onSubmit.bind(this)}onChange(e){let{target:t}=e;const{name:a,value:s}=t;this.setState({[a]:s})}onSubmit(e){e.preventDefault(),this.setState(s.v(E),(()=>{const{email:e,hasErrors:t,redirect:a}=this.state,{ventureId:r}=this.props;if(t)return;const c=l.c({baseUrl:"/m/api/crm"});this.setState({busy:!0}),c.requestPasswordReset({ventureId:r,email:e,redirect:a,source:"WEBSITE_BUILDER"}).then((()=>{this.setState({successful:!0})})).catch((()=>{this.setState({busy:!1}),this.setState(s.a("form","requestResetErrorMessage"))}))}))}render(){const{Block:e,Heading:a,Text:r,Input:c,Button:l,Link:o,Error:n}=(global.Core||guac["@wsb/guac-widget-core"]).UX2.Element,{Grid:i,Grid:{Cell:g}}=(global.Core||guac["@wsb/guac-widget-core"]).UX2.Component,{staticContent:d,onCancel:E}=this.props,{email:m,busy:R,successful:b}=this.state,p=b?d.requestAccessSentTitle:d.resetPassword,h=b?d.resetEmailSentMessage:d.resetEmailMessage;return(global.React||guac.react).createElement(e,null,(global.React||guac.react).createElement(a,{style:u.marginBottom,"data-aid":t.d.MEMBERSHIP_REQ_RESET_TITLE_REND},p),(global.React||guac.react).createElement(i,{inset:!0},(global.React||guac.react).createElement(g,null,(global.React||guac.react).createElement(r,{"data-aid":t.d.MEMBERSHIP_REQ_RESET_MESSAGE_REND,style:u.centeredMarginBottom},h),b||(global.React||guac.react).createElement((global.React||guac.react).Fragment,null,(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Group.Form,{tag:"form",onSubmit:this.onSubmit,"data-aid":t.d.MEMBERSHIP_REQ_RESET_FORM_REND,style:{...u.flexContainer,...u.formContainer}},(global.React||guac.react).createElement(e,{style:u.marginBottom},(global.React||guac.react).createElement(c,{tag:"input",type:"text",name:"email",onChange:this.onChange,placeholder:d.emailAddressPlaceholder,"aria-label":d.emailAddressPlaceholder,"data-aid":t.d.MEMBERSHIP_REQ_RESET_EMAIL,value:m}),(global.React||guac.react).createElement(s.W,{state:this.state,field:"email"},(e=>(global.React||guac.react).createElement(n,{"data-aid":t.d.MEMBERSHIP_REQ_RESET_ERR_REND},d[e])))),(global.React||guac.react).createElement(e,{style:u.formButtonBlock},(global.React||guac.react).createElement(l.Primary,{tag:"button",type:"submit","data-aid":t.d.MEMBERSHIP_REQ_RESET_SUBMIT,disabled:R,state:R?"disabled":void 0,style:u.marginBottom},d.sendResetLink))),(global.React||guac.react).createElement(e,{style:{textAlign:"center"}},(global.React||guac.react).createElement(s.W,{state:this.state,field:"form"},(e=>(global.React||guac.react).createElement(n,{"data-aid":t.d.MEMBERSHIP_REQ_RESET_ERR_REND},d[e]))),this.state.hasErrors&&Object.keys(this.state.errors).map((e=>(global.React||guac.react).createElement(n,{key:e,"data-aid":t.d.MEMBERSHIP_REQ_RESET_ERR_REND},d[this.state.errors[e]]))))),(global.React||guac.react).createElement(r,{"data-aid":t.d.MEMBERSHIP_REQ_RESET_CANCEL,style:u.centeredMarginBottom},d.dontNeedToReset," ",(global.React||guac.react).createElement(o,{style:u.signInLink,onClick:E},d.signInLinkText)))))}}m.propTypes={staticContent:(global.PropTypes||guac["prop-types"]).object,ventureId:(global.PropTypes||guac["prop-types"]).string.isRequired,onCancel:(global.PropTypes||guac["prop-types"]).func.isRequired};const R=new r.S;class b extends(global.React||guac.react).Component{constructor(e){super(e),this.onChange=this.onChange.bind(this),this.onSubmit=this.onSubmit.bind(this),this.showResetPassword=this.showResetPassword.bind(this),this.hideResetPassword=this.hideResetPassword.bind(this);const t=a.g("err");var s;this.state={email:"",password:"",redirect:unescape(a.g("r")),app:unescape(a.g("app"))||"website",busy:!1,hasErrors:!!t,errors:t?{form:(s=t,{FAILED_CONTACT_LOGIN:"loginIncorrectMessage"}[s]||"loginErrorMessage")}:{}}}onSubmit(e){this.setState({busy:!0});const t=s.v(d)(this.state),{hasErrors:a}=t;if(a)return e.preventDefault(),this.setState(t),!1}onChange(e){let{target:t}=e;const{name:a,value:s}=t;this.setState({[a]:s})}showResetPassword(){this.setState({showResetPassword:!0})}hideResetPassword(){this.setState({showResetPassword:!1})}render(){const{Heading:e,Container:a,Link:r,Text:c,Input:l,Button:o,Block:n,Error:i}=(global.Core||guac["@wsb/guac-widget-core"]).UX2.Element,{email:g,password:d,busy:E,showResetPassword:u,redirect:b,app:p}=this.state,{staticContent:h,membershipAccountsOn:S,ventureId:_}=this.props,{Grid:M,Grid:{Cell:y}}=(global.Core||guac["@wsb/guac-widget-core"]).UX2.Component;return(global.React||guac.react).createElement(a,null,u?(global.React||guac.react).createElement(m,{onCancel:this.hideResetPassword,staticContent:h,ventureId:_}):(global.React||guac.react).createElement((global.React||guac.react).Fragment,null,(global.React||guac.react).createElement(e,{style:R.marginBottom,"data-aid":t.d.MEMBERSHIP_SSO_TITLE_REND,level:2},h.ssoLoginTitle),(global.React||guac.react).createElement(M,{inset:!0},(global.React||guac.react).createElement(y,null,(global.React||guac.react).createElement(c,{"data-aid":t.d.MEMBERSHIP_SSO_MESSAGE_REND,style:R.centeredMarginBottom},h.ssoLoginMessage),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Group.Form,{tag:"form",action:"/m/login",method:"post",onSubmit:this.onSubmit,"data-aid":t.d.MEMBERSHIP_SSO_FORM_REND},(global.React||guac.react).createElement(n,{style:R.marginBottom},(global.React||guac.react).createElement(l,{tag:"input",type:"text",name:"email",autocomplete:"email",onChange:this.onChange,placeholder:h.emailPlaceholder,"aria-label":h.emailPlaceholder,"data-aid":t.d.MEMBERSHIP_SSO_LOGIN_EMAIL,value:g}),(global.React||guac.react).createElement(s.W,{state:this.state,field:"email"},(e=>(global.React||guac.react).createElement(i,{"data-aid":t.d.MEMBERSHIP_SSO_ERR_REND},h[e])))),(global.React||guac.react).createElement(n,{style:R.marginBottom},(global.React||guac.react).createElement(l,{tag:"input",type:"password",name:"password",autocomplete:"current-password",onChange:this.onChange,placeholder:h.passwordPlaceholder,"aria-label":h.passwordPlaceholder,"data-aid":t.d.MEMBERSHIP_SSO_LOGIN_PASSWORD,value:d}),(global.React||guac.react).createElement(s.W,{state:this.state,field:"password"},(e=>(global.React||guac.react).createElement(i,{"data-aid":t.d.MEMBERSHIP_SSO_ERR_REND},h[e])))),(global.React||guac.react).createElement(l,{type:"hidden",name:"redirect",value:b}),(global.React||guac.react).createElement(l,{type:"hidden",name:"app",value:p}),(global.React||guac.react).createElement(n,{style:R.formButtonBlock},(global.React||guac.react).createElement(o.Primary,{tag:"button",type:"submit","data-aid":t.d.MEMBERSHIP_SSO_SUBMIT,disabled:E,state:E?"disabled":void 0,style:R.marginBottom},h.signIn),(global.React||guac.react).createElement(s.W,{state:this.state,field:"form"},(e=>(global.React||guac.react).createElement(i,{"data-aid":t.d.MEMBERSHIP_SSO_ERR_REND},h[e])))),(global.React||guac.react).createElement(n,{style:R.centeredMarginBottom},(global.React||guac.react).createElement(r,{"data-aid":t.d.MEMBERSHIP_SSO_REQ_RESET,onClick:this.showResetPassword},h.resetPassword))),S&&(global.React||guac.react).createElement(c,{"data-aid":t.d.MEMBERSHIP_REQUEST_ACCESS_REND,style:{...R.centeredMarginBottom,...R.notAMember}},h.notMember," ",(global.React||guac.react).createElement(r,{href:"/m/create-account"},h.createAccountLinkText))))))}}b.propTypes={staticContent:(global.PropTypes||guac["prop-types"]).object.isRequired,ventureId:(global.PropTypes||guac["prop-types"]).string.isRequired,membershipAccountsOn:(global.PropTypes||guac["prop-types"]).bool};class p extends(global.React||guac.react).Component{render(){return(global.React||guac.react).createElement(b,t.a({},this.props,{"data-aid":t.d.MEMBERSHIP_SSO_FORM_REND}))}}p.propTypes={staticContent:(global.PropTypes||guac["prop-types"]).object.isRequired,membershipAccountsOn:(global.PropTypes||guac["prop-types"]).boolean},e.default=p,Object.defineProperty(e,"__esModule",{value:!0})})),"undefined"!=typeof window&&(window.global=window);
//# sourceMappingURL=bs-SsoLoginBootstrap-5ff5ada6.js.map
